<!DOCTYPE html>

<head>
  <base href="/constellation-app.github.io/help/constellation/">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="../../../assets/css/app.css" />
  <link rel="stylesheet" href="../../../assets/bootstrap/css/bootstrap.css" />
  <noscript>
    <link rel="stylesheet" href="../../../assets/css/noscript.css" />
  </noscript>

  <!-- Scripts -->
  <script src="../../../assets/js/jquery.min.js"></script>
  <script src="../../../assets/js/js.cookie.min.js"></script>
  <script src="../../../assets/js/jquery.dropotron.min.js"></script>
  <script src="../../../assets/js/jquery.scrolly.min.js"></script>
  <script src="../../../assets/js/jquery.scrollex.min.js"></script>
  <script src="../../../assets/js/browser.min.js"></script>
  <script src="../../../assets/js/breakpoints.min.js"></script>
  <script src="../../../assets/js/app.js"></script>
  <script src="../../../assets/bootstrap/js/bootstrap.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-139401597-2"></script>

  <script>
    $(function() {
      $("#includedContent").load("../../toc.html");
    });
  </script>

  <!-- Nav -->
  <nav id="nav">
    <ul>
      <li><a href="../../../index.html">Home</a></li>
      <li><a href="../../../index.html#banner" class="scrolly">About</a></li>
      <li><a href="../../../index.html#features" class="scrolly">Features</a></li>
      <li><a href="../../../download.html" class="scrolly">Download</a></li>
      <li><a href="../../../blog.html" class="scrolly">Blog</a></li>
      <li><a href="../ext/docs/CoreFunctionality/src/au/gov/asd/tac/constellation/functionality/about-constellation.html" class="scrolly">Documentation</a></li>
      <li><a href="../../../index.html#contact" class="scrolly">Contact</a></li>
    </ul>
  </nav>

</head>

<body style="padding-top: 100px;">

  <div class="row">
    <div class="col-4 col-sm-3">
      <div id="includedContent"></div>
    </div>
    <div class="col-8 col-sm-9">
      <h1>Import From Database</h1>
      <table class="table table-striped">
      <colgroup>
      <col style="width: 25%" />
      <col style="width: 25%" />
      <col style="width: 25%" />
      <col style="width: 25%" />
      </colgroup>
      <thead>
      <tr class="header">
      <th>Constellation Action</th>
      <th>Keyboard Shortcut</th>
      <th>User Action</th>
      <th style="text-align: center;">Menu Icon</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td>Open Database Importer</td>
      <td></td>
      <td>File -&gt; Import -&gt; From Database...</td>
      <td style="text-align: center;"><img src="../ext/docs/CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/resources/jdbc_import.png" alt="Import From Database Icon" /></td>
      </tr>
      </tbody>
      </table>

      <h2>Introduction</h2>
      <p>The "Import from Database" window allows you to import data from a database using a JDBC Connection.</p>
      <p>Full Example:</p>
      <div style="text-align: center">
          <img src="../ext/docs/CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/resources/ImportDatabaseFullExample.png" alt="Database Importer Connection
          example with all details" />
      </div>
      <br/>

      <h2>High Level Workflow Steps</h2>
      <p>The following is a high level workflow an analyst can follow (explained in detail later on):</p>
      <ol>
      <li><p>Add the relevant JDBC Driver via "Manage Connections" -&gt; "Drivers" tab. These drivers will be specific to the database that you are connecting to. You only need one driver for each database type e.g. MySQL, PostgresQL, SQLite Example drivers:</p>
      <ul>
      <li>MySQL - <a href="https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.23/mysql-connector-java-8.0.23.jar">mysql-connector-java-8.0.23.jar</a></li>
      <li>SQLite - <a href="https://repo1.maven.org/maven2/org/xerial/sqlite-jdbc/3.36.0.3/sqlite-jdbc-3.36.0.3.jar">sqlite-jdbc-3.36.0.3.jar</a></li>
      <li>Postgresql - <a href="https://repo1.maven.org/maven2/org/postgresql/postgresql/42.7.1/postgresql-42.7.1.jar">postgresql-42.7.1.jar</a></li>
      </ul>
      <div style="text-align: center">
          <img src="../ext/docs/CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/resources/DBDriversExample.png" alt="Database
      </li>
      </ol>
      <p>drivers example" /&gt;</p>
      <pre><code>&lt;/div&gt;
      </code></pre>
      <ol start="2">
      <li><p>Add the Connection details in "Manage Connections" -&gt; "Connections" tab. The connection will be an instance to a specific database.</p>
      <ul>
      <li><p><em>Connection name</em> - user specified name for the connection</p></li>
      <li><p><em>Driver</em> - Pick the database driver needed to connect to the db</p></li>
      <li><p><em>Connection String</em> - It will contain the database type, host, port, and name of the database in the format <code>jdbc:[database name]://[host]:[port]/[database name]</code></p></li>
      <li><p>e.g. <code>jdbc:mysql://localhost:3306/employees</code> for mysql or <code>jdbc:postgresql://localhost:5432/test</code> for postgres.</p></li>
      <li><p>If the username and password are not required, leave them blank.</p>
      <img src="../ext/docs/CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/resources/DBConnections.png" alt="Database Importer Connection example" />
      </li>
      </ul></li>
      </ol>
      <br />
      3.  Select the connection from the "Connection" drop-down in the main
          Import window.
      4.  Enter the username and password if the connection requires them.
      5.  Enter the SQL Query and Click the "Query" button to retrieve data.
      6.  Select your destination graph.
      7.  Drag and drop attributes from the bottom pane onto your columns (Shown in the image below).
      8.  Right click an attribute for more options.
      9.  Click on the "Import" button to import the data to your destination
          graph.

      <pre><code>&lt;img width=575 src=&quot;../ext/docs/CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/resources/dragging_attributes_jdbc_import.png&quot; alt=&quot;Database
      Importer&quot; /&gt;
      </code></pre>
      <p>Hints:</p>
      <ul>
      <li>See all supported attributes using Options -&gt; Show all schema attributes</li>
      <li>Hover over the attribute name for a tooltip.</li>
      <li>Filter in the Configuration Pane by adding searches e.g. first_name=="Nick".</li>
      </ul>
      <h2>Add and Remove Connections to Import Queries From</h2>
      <p>Once you select a connection and submit a query, the "Configuration" section will display the first 100 rows as a preview.</p>
      <h2>Select the Destination Graph</h2>
      <p>Select the destination graph from the drop-down list. Once selected, the attributes in the configuration pane update depending on what attributes are supported by the schema of that graph.</p>
      <h2>Apply Attributes</h2>
      <p>Applying an attribute to the column is simple as dragging and dropping an attribute onto a column in the preview.</p>
      <p>By default, not all attributes available to the selected schema are visible because there can be an overwhelming number of attributes depending on the schema. To see all possible attributes you can apply to a graph go to Options -&gt; Show all schema attributes.</p>
      <p>If you have a specific format for example the DateTime, then you can right click on the DateTime attribute and select the format from the drop down list or enter your own.</p>
      <p>If you want to create your own attributes then you can by clicking on <img src="../ext/docs/CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/resources/plus_black.png" alt="Add Attribute Icon"/> and selecting a type and entering a label.</p>
      <h2>Directed and Undirected Transactions</h2>
      <p>By default, transactions are created as directed. In the Transaction Attributes column there is a pseudo-attribute called "__directed__" (different from "directed") which can be used to create directed and undirected transactions as required. The "__directed__" pseudo-attribute is a boolean that will cause a transaction to be directed when its value is "true" (case insensitive), and undirected otherwise.</p>
      <h2>Importing Data</h2>
      <p>Once your configuration is finished, import the entire query by clicking on the Import button located at the bottom right hand corner.</p>
      <p>NOTE: The import view does not disappear after clicking import. This is so that you don't have to re-configure from the beginning. Once you are satisfied with the configuration, you have the ability to save your settings explained in the next section.</p>
      <h2>Save and Load Import Templates</h2>
      <p>An import configuration can be saved as a template, and loaded at a later time, using the "Options" menu in the top left corner.</p>
      <p>When a template is saved, the import definition name is used to name the saved query. If a query of that name has already been saved, you will be asked if you want to overwrite it. Templates are saved in the directory "&lt;HOME_DIRECTORY&gt;/.CONSTELLATION/ImportDatabase". (The name of the file in which the template is saved is encoded so it doesn't clash with file system limitations.) Files in this directory can be deleted using your favourite file management utility.</p>
      <p>Before loading a template, select the query you want to import. The loaded template then attempts to match the column names it knows with the column names in the current query. If a template is loaded before any queries are selected, there are no columns to match against.</p>
      <p>When you select "Load...", you will be presented with a list of saved templates. Select one from the list and select OK. The template will be loaded and will appear as it was when it was saved.</p>
      <h2>Share Templates</h2>
      <p>To share the template do the following:</p>
      <ol>
      <li>Click on Help -&gt; User Directory</li>
      <li>Navigate to the folder called "ImportDatabase"</li>
      <li>Give the appropriate .json file to a recipient</li>
      <li>Upon receiving the file, they can follow these steps to save that .json file inside the "ImportDatabase" directory</li>
      </ol>
      <p>NOTE: The .json filename should not change!</p>
    </div>
  </div>

  <!-- Footer -->
  <div id="footer">
    <div class="container">
      <div class="row">
        <div class="col-12">

          <!-- Contact Us -->
          <section id="contact" class="contact">
            <header>
              <h3>Contact Us</h3>
            </header>
            <p>Feel free to ask a question on Gitter or file an issue on our GitHub Issues board.</p>
            <p>
              <a href="https://gitter.im/constellation-app/community" class="button">Contact Us</a>
              <span>&nbsp;&nbsp;&nbsp;</span>
              <a href="https://github.com/constellation-app/constellation/blob/master/CONTRIBUTING.md#reporting-bugs" class="button">Report Issue</a>
            </p>
          </section>

          <!-- Copyright -->
          <div class="copyright">
            <ul class="menu">
              <li>&copy; 2024 | Website developed by the <a href="https://github.com/constellation-app">Constellation community</a>. All rights reserved.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>

    $(document).ready(function() {
      var allCookies = Cookies.get();
      for (var cookie in allCookies) {
        if (cookie != null) {
          $("#" + cookie).removeClass('show');
          var cookieValue = Cookies.get(cookie);
          if (cookieValue == ("true")) {
            $("#" + cookie).collapse('show');
          } else {
            $("#" + cookie).collapse('hide');
            $("#" + cookie + " .collapse").removeClass('show');
          }
        }
      }
    });

    $(".collapse").on('shown.bs.collapse', function(e) {
      console.log('shown');
      e.stopPropagation();
      var active = $(this).attr('id');
      Cookies.set(active, "true");
      $("#" + active).addClass('show');
    });
    $(".collapse").on('hidden.bs.collapse', function(e) {
      console.log('collapsed');
      e.stopPropagation();
      var active = $(this).attr('id');
      Cookies.set(active, "false");
      $("#" + active).removeClass('show');
      $("#" + active).collapse('hide');
    });

    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-139401597-2');
  </script>
</body>
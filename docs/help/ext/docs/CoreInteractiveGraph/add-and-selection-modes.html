<!DOCTYPE html>

<head>
  <base href="/constellation-app.github.io/help/constellation/">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="../../../assets/css/app.css" />
  <link rel="stylesheet" href="../../../assets/bootstrap/css/bootstrap.css" />
  <link rel="stylesheet" href="../../../assets/bootstrap/css/search.css" />
  <noscript>
    <link rel="stylesheet" href="../../../assets/css/noscript.css" />
  </noscript>

  <!-- Scripts -->
  <script src="../../../assets/js/jquery.min.js"></script>
  <script src="../../../assets/js/js.cookie.min.js"></script>
  <script src="../../../assets/js/jquery.dropotron.min.js"></script>
  <script src="../../../assets/js/jquery.scrolly.min.js"></script>
  <script src="../../../assets/js/jquery.scrollex.min.js"></script>
  <script src="../../../assets/js/browser.min.js"></script>
  <script src="../../../assets/js/breakpoints.min.js"></script>
  <script src="../../../assets/js/app.js"></script>
  <script src="../../../assets/bootstrap/js/bootstrap.js"></script>
  <script src="../../../assets/bootstrap/js/index.min.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-139401597-2"></script>

  <script>
    $(function() {
      $("#includedContent").load("../toc.html");
    });
  </script>

  <!-- Nav -->
  <nav id="nav">
    <ul>
      <li><a href="../../../index.html">Home</a></li>
      <li><a href="../../../index.html#banner" class="scrolly">About</a></li>
      <li><a href="../../../index.html#features" class="scrolly">Features</a></li>
      <li><a href="../../../download.html" class="scrolly">Download</a></li>
      <li><a href="../../../blog.html" class="scrolly">Blog</a></li>
      <li><a href="../ext/docs/CoreFunctionality/about-constellation.html" class="scrolly">Documentation</a></li>
      <li><a href="../../../index.html#contact" class="scrolly">Contact</a></li>
    </ul>
  </nav>

</head>

<body style="padding-top: 100px;">

  <div class="row">
    <div class="col-4 col-sm-3">
      <div id="includedContent"></div>
    </div>
    <div class="col-8 col-sm-9">
        <!-- Create the searchbar -->
        <div class="App">
            <!-- Search bar -->
            <div class="SearchBox">
                <div class="Search">
                    <button class="icon">&#x1F50D</button>
                    <input type="text" placeholder="Search help documentation" />
                    <button class="clear">&times;</button>
                </div>
                <ul class="SuggestionList"></ul>
            </div>
            <ul class="ResultsList"></ul>
        </div>

      <h1>Add and Selection Modes</h1>
      <h2>Add Mode</h2>
      <p>Select the <img src="../ext/docs/CoreInteractiveGraph/resources/add.png" alt="Add Mode
      Icon" /> icon to switch to add mode. This mode allows the user to manually create nodes and transactions.</p>
      <table class="table table-striped">
      <colgroup>
      <col style="width: 50%" />
      <col style="width: 50%" />
      </colgroup>
      <thead>
      <tr class="header">
      <th>Graph Action</th>
      <th>Mouse Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td>Create a Node</td>
      <td>Left-click on the background</td>
      </tr>
      <tr class="even">
      <td>Create a Transaction</td>
      <td><ol>
      <li>Left-click on a node</li>
      <li>Left-click on another node (or same node for a loop)</li>
      </ol></td>
      </tr>
      <tr class="odd">
      <td>Create a Transaction Sequence</td>
      <td><ol>
      <li>Left-click on a node</li>
      <li>Ctrl-left-click on another node (or same node for a loop). A second transaction will automatically be created starting from that node.</li>
      <li>Repeat step 2 until final transaction.</li>
      <li>Left-click on another node (or same node for a loop)</li>
      </ol></td>
      </tr>
      <tr class="even">
      <td>Create a Series of Transactions Starting From the Same Node</td>
      <td><ol>
      <li>Left-click on a node</li>
      <li>Shift-left-click on another node (or same node for a loop). A second transaction will automatically be created starting from the original node.</li>
      <li>Repeat step 2 until final transaction.</li>
      <li>Left-click on another node (or same node for a loop)</li>
      </ol></td>
      </tr>
      </tbody>
      </table>

      <p>NOTE: While creating a transaction, you can left-click on the background or press ESC to abort creating it.</p>
      <p>When creating transactions, you can choose whether to generate directed or undirected transactions by selecting either the <img src="../ext/docs/CoreInteractiveGraph/resources/directed.png" alt="Directed
      Transactions Icon" /> icon (for directed) or the <img src="../ext/docs/CoreInteractiveGraph/resources/undirected.png" alt="Undirected Transactions
      Icon" /> icon (for undirected). By default, directed will be selected.</p>
      <h2>Selection Mode</h2>
      <p>Select the <img src="../ext/docs/CoreInteractiveGraph/resources/select.png" alt="Selection Mode
      Icon" /> icon to switch to selection mode. This mode allows the user to select elements in the graph and perform graphical operations such as zoom, pan, and rotate.</p>
      <p>Navigating the graph in selection mode using the mouse is done as follows (In general the left button is for selecting, the middle button for rotating, and the right button for dragging and panning):</p>
      <table class="table table-striped">
      <colgroup>
      <col style="width: 50%" />
      <col style="width: 50%" />
      </colgroup>
      <thead>
      <tr class="header">
      <th>Mouse Action</th>
      <th>Graph Action</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td>Left-click on an element</td>
      <td>Select a node or transaction.</td>
      </tr>
      <tr class="even">
      <td>Left-click on the background</td>
      <td>Set focus on the graph window.</td>
      </tr>
      <tr class="odd">
      <td>Double-left-click on the background</td>
      <td>Deselect all elements</td>
      </tr>
      <tr class="even">
      <td>Shift-left-click on an element</td>
      <td>Select additional nodes and/or transactions.</td>
      </tr>
      <tr class="odd">
      <td>Ctrl-left-click on an element</td>
      <td>Toggle selection of nodes and/or transactions.</td>
      </tr>
      <tr class="even">
      <td>Left-drag</td>
      <td>Select multiple nodes and/or transactions with a box selection.</td>
      </tr>
      <tr class="odd">
      <td>Shift-left-drag</td>
      <td>Select additional multiple nodes and/or transactions with a box selection.</td>
      </tr>
      <tr class="even">
      <td>Ctrl-left-drag</td>
      <td>Toggle selection of multiple nodes and/or transactions with a box selection.</td>
      </tr>
      <tr class="odd">
      <td>Alt-left-drag</td>
      <td>Select multiple nodes and/or transactions with a freeform selection.</td>
      </tr>
      <tr class="even">
      <td>Alt-shift-left-drag</td>
      <td>Select additional multiple nodes and/or transactions with a freeform selection.</td>
      </tr>
      <tr class="odd">
      <td>Alt-ctrl-left-drag</td>
      <td>Toggle selection of multiple nodes and/or transactions with a freeform selection.</td>
      </tr>
      <tr class="even">
      <td>Middle-drag</td>
      <td>Rotate the graph.
      <ul>
      <li>Dragging the mouse up and down the middle of the window will rotate around the X axis.</li>
      <li>Dragging the mouse across the middle of the window will rotate around the Y axis.</li>
      <li>Dragging the mouse along the edges of the window will rotate around the Z axis.</li>
      </ul></td>
      </tr>
      <tr class="odd">
      <td>Right-drag on background</td>
      <td>Pan the graph.</td>
      </tr>
      <tr class="even">
      <td>Right-drag on node</td>
      <td>Drag the node and other selected nodes.</td>
      </tr>
      <tr class="odd">
      <td>Right-drag on transaction</td>
      <td>Pan the graph.</td>
      </tr>
      </tbody>
      </table>
    </div>
  </div>

  <!-- Footer -->
  <div id="footer">
    <div class="container">
      <div class="row">
        <div class="col-12">

          <!-- Contact Us -->
          <section id="contact" class="contact">
            <header>
              <h3>Contact Us</h3>
            </header>
            <p>Feel free to ask a question on Gitter or file an issue on our GitHub Issues board.</p>
            <p>
              <a href="https://gitter.im/constellation-app/community" class="button">Contact Us</a>
              <span>&nbsp;&nbsp;&nbsp;</span>
              <a href="https://github.com/constellation-app/constellation/blob/master/CONTRIBUTING.md#reporting-bugs" class="button">Report Issue</a>
            </p>
          </section>

          <!-- Copyright -->
          <div class="copyright">
            <ul class="menu">
              <li>&copy; 2025 | Website developed by the <a href="https://github.com/constellation-app">Constellation community</a>. All rights reserved.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    $(document).ready(function() {
      var allCookies = Cookies.get();
      for (var cookie in allCookies) {
        if (cookie != null) {
          $("#" + cookie).removeClass('show');
          var cookieValue = Cookies.get(cookie);
          if (cookieValue == ("true")) {
            $("#" + cookie).collapse('show');
          } else {
            $("#" + cookie).collapse('hide');
            $("#" + cookie + " .collapse").removeClass('show');
          }
        }
      }
    });

    $(".collapse").on('shown.bs.collapse', function(e) {
      console.log('shown');
      e.stopPropagation();
      var active = $(this).attr('id');
      Cookies.set(active, "true");
      $("#" + active).addClass('show');
    });
    $(".collapse").on('hidden.bs.collapse', function(e) {
      console.log('collapsed');
      e.stopPropagation();
      var active = $(this).attr('id');
      Cookies.set(active, "false");
      $("#" + active).removeClass('show');
      $("#" + active).collapse('hide');
    });

    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-139401597-2');
  </script>

  <script>
    // The script for the search 
    let pages = [];

    fetch('../search.json')
        .then(response => response.json())
        .then((documents) => {
            pages = documents;
            return miniSearch.addAll(pages);
    }, {});
        
    const miniSearch = new MiniSearch({
        fields: ['title', 'category'],
        storeFields: ['title', 'category', 'link']
    });
        
    const app = document.querySelector('.App');
    const search = document.querySelector('.Search');
    const searchInput = document.querySelector('.Search input');
    const clearButton = document.querySelector('.Search button.clear');
    const suggestionList = document.querySelector('.SuggestionList');
    const resultsList = document.querySelector(".ResultsList");
        
    const capitalize = (string) => string.replace(/(\b\w)/gi, (char) => char.toUpperCase());

    // Typing into search bar updates search results and suggestions
    searchInput.addEventListener('input', (event) => {
        const query = searchInput.value;

        const results = (query.length > 1) ? getSearchResults(query) : [];
        renderSearchResults(results);
  
        const suggestions = (query.length > 1) ? getSuggestions(query) : [];
        renderSuggestions(suggestions);
    });
        
    // Clicking on clear button clears search and suggestions
    clearButton.addEventListener('click', () => {
        searchInput.value = '';
        searchInput.focus();

        renderSearchResults([]);
        renderSuggestions([]);
    });

    // Clicking on a suggestion selects it
    suggestionList.addEventListener('click', (event) => {
        const suggestion = event.target;

        if (suggestion.classList.contains('Suggestion')) {
            const query = suggestion.innerText.trim();
            searchInput.value = query;
            searchInput.focus();

            const results = getSearchResults(query);
            renderSearchResults(results);
            renderSuggestions([]);
        }
    });

    // Clicking outside of search bar clears suggestions
    app.addEventListener('click', (event) => {
        renderSuggestions([]);
    });
        
    // Pressing up/down/enter key while on search bar navigates through suggestions
    search.addEventListener('keydown', (event) => {
        const key = event.key;

        if (key === 'ArrowDown') {
            selectSuggestion(+1);
        } else if (key === 'ArrowUp') {
            selectSuggestion(-1);
        } else if (key === 'Enter' || key === 'Escape') {
            searchInput.blur();
            renderSuggestions([]);
        } else {
            return;
        }
        const query = searchInput.value;
        const results = getSearchResults(query);
        renderSearchResults(results);
    });

    // Get the search results
    const getSearchResults = (query) => {
        return miniSearch.search(query).map(({ id }) => pages[id]);
    };

    // Get possible suggestions for what has been typed
    const getSuggestions = (query) => {
        return miniSearch.autoSuggest(query);
    };

    // Display the search results on the page
    const renderSearchResults = (results) => {
        resultsList.innerHTML = results.map(({title, link}) => {
            return `<li class="Result">
                <a href=\ ${link}> ${capitalize(title)}</a>
                </li>`;
            }).join('\n');

        if (results.length > 0) {
            app.classList.add('hasResults');
        } else {
            app.classList.remove('hasResults');
        }
    };

    // Display the suggestions
    const renderSuggestions = (suggestions) => {
        suggestionList.innerHTML = suggestions.map(({ suggestion }) => {
            return `<li class="Suggestion">${suggestion}</li>`;
        }).join('\n');

        if (suggestions.length > 0) {
            app.classList.add('hasSuggestions');
        } else {
            app.classList.remove('hasSuggestions');
        }
    };

    // Select a suggestion and set the text input text to match 
    const selectSuggestion = (direction) => {
        const suggestions = document.querySelectorAll('.Suggestion');
        const selected = document.querySelector('.Suggestion.selected');
        const index = Array.from(suggestions).indexOf(selected);

        if (index > -1) {
            suggestions[index].classList.remove('selected');
        }

        const nextIndex = Math.max(Math.min(index + direction, suggestions.length - 1), 0);
        suggestions[nextIndex].classList.add('selected');
        searchInput.value = suggestions[nextIndex].innerText;
    };     
        
    /**
     * Code for MiniSearch is based on the demo provided at:
     * https://github.com/lucaong/minisearch/blob/master/examples/plain_js
     */

  </script>
</body>
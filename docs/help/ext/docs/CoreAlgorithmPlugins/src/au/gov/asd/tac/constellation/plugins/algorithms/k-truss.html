<!DOCTYPE html>

<head>
  <base href="/constellation-app.github.io/help/constellation/">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="../../../assets/css/app.css" />
  <link rel="stylesheet" href="../../../assets/bootstrap/css/bootstrap.css" />
  <link rel="stylesheet" href="../../../assets/bootstrap/css/search.css" />
  <noscript>
    <link rel="stylesheet" href="../../../assets/css/noscript.css" />
  </noscript>

  <!-- Scripts -->
  <script src="../../../assets/js/jquery.min.js"></script>
  <script src="../../../assets/js/js.cookie.min.js"></script>
  <script src="../../../assets/js/jquery.dropotron.min.js"></script>
  <script src="../../../assets/js/jquery.scrolly.min.js"></script>
  <script src="../../../assets/js/jquery.scrollex.min.js"></script>
  <script src="../../../assets/js/browser.min.js"></script>
  <script src="../../../assets/js/breakpoints.min.js"></script>
  <script src="../../../assets/js/app.js"></script>
  <script src="../../../assets/bootstrap/js/bootstrap.js"></script>
  <script src="../../../assets/bootstrap/js/index.min.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-139401597-2"></script>

  <script>
    $(function() {
      $("#includedContent").load("../toc.html");
    });
  </script>

  <!-- Nav -->
  <nav id="nav">
    <ul>
      <li><a href="../../../index.html">Home</a></li>
      <li><a href="../../../index.html#banner" class="scrolly">About</a></li>
      <li><a href="../../../index.html#features" class="scrolly">Features</a></li>
      <li><a href="../../../download.html" class="scrolly">Download</a></li>
      <li><a href="../../../blog.html" class="scrolly">Blog</a></li>
      <li><a href="../ext/docs/CoreFunctionality/src/au/gov/asd/tac/constellation/functionality/about-constellation.html" class="scrolly">Documentation</a></li>
      <li><a href="../../../index.html#contact" class="scrolly">Contact</a></li>
    </ul>
  </nav>

</head>

<body style="padding-top: 100px;">

  <div class="row">
    <div class="col-4 col-sm-3">
      <div id="includedContent"></div>
    </div>
    <div class="col-8 col-sm-9">
        <!-- Create the searchbar -->
        <div class="App">
            <!-- Search bar -->
            <div class="SearchBox">
                <div class="Search">
                    <button class="icon">&#x1F50D</button>
                    <input type="text" placeholder="Search help documentation" />
                    <button class="clear">&times;</button>
                </div>
                <ul class="SuggestionList"></ul>
            </div>
            <ul class="ResultsList"></ul>
        </div>

      <h1>K-Truss</h1>
      <h2>Find highly connected groups of nodes in a graph</h2>
      <table class="table table-striped">
      <colgroup>
      <col style="width: 25%" />
      <col style="width: 25%" />
      <col style="width: 25%" />
      <col style="width: 25%" />
      </colgroup>
      <thead>
      <tr class="header">
      <th>Constellation Action</th>
      <th>Keyboard Shortcut</th>
      <th>User Action</th>
      <th style="text-align: center;">Menu Icon</th>
      </tr>
      </thead>
      <tbody>
      <tr class="odd">
      <td>Open K-Truss Visibility Panel</td>
      <td></td>
      <td>Tools -&gt; Cluster -&gt; K-Truss</td>
      <td style="text-align: center;"><img src="../ext/docs/CoreAlgorithmPlugins/src/au/gov/asd/tac/constellation/plugins/algorithms/resources/ktruss.png" alt="K-Truss Icon" /></td>
      </tr>
      </tbody>
      </table>

      <p>For some whole number k &gt;= 3, a k-truss is a graph (or part thereof) where every transaction lies in at least k-2 triangles. e.g. in a 3-truss every transaction lies in at least 1 triangle, while in a 4-truss, every transaction lies in at least 2 triangles. There is no upper limit on the number of nodes in a k-truss, but it must have at least k nodes, otherwise there are not enough triangles. A k-truss captures the idea of a group of nodes with a particular level of interconnectivity - the higher the value of k is, the greater the interconnection between nodes. Note that a k-truss is also a j-truss for all values of j &lt; k.</p>
      <h2>In Constellation</h2>
      <p>The plugin will assign an integer attribute "Cluster.KTruss.Highest" to each node and transaction. This value will be the largest value of k for which the node/transaction is in a k-truss. This attribute can be used like a cluster attribute, but perhaps more useful is the ability to explore the k-trusses in the graph using the K-Truss Visibility panel. This panel is opened automatically after running the K-Truss plugin, but can be accessed at any time from the menu via Tools -&gt; Cluster -&gt; K-Truss. Note that it is disabled for a graph unless the K-Truss plugin has previously been run on that graph.</p>
      <h2>Using the Visibility Panel</h2>
      <p>The K-Truss Visibility panel contains a number of features for visualising k-trusses and the relationships between them. The simplest and most useful feature is the visibility slider.</p>
      <h3>Visibility Slider</h3>
      <p>The visibility slider ranges over all possible values of k for viewing k-trusses in the graph. Dragging the slider to a specific value of k will display only nodes and transactions which are in a k-truss. Nodes which are not displayed will be either dimmed (default) or hidden. The slider starts at 3, the lowest possible value of k. There is also an "all" value which displays the entire graph. The numbers in bold show where the display will change. For example if 5 is in bold, then there are 5-trusses in the graph which are not 6-trusses, and hence dragging the slider from 5 to 6 will change the display. If 5 was not bold, it would mean that all 5-trusses are also 6-trusses, and hence dragging the slider from 5 to 6 will not change the display. You should gradually move the slider to higher values in bold, so as to focus on smaller and more highly connected parts of the graph.</p>
      <h3>Excluded Elements Options</h3>
      <p>The two radio buttons allow you to dynamically switch between dimming (default) or hiding the nodes and transactions which would not be displayed based on the visibility slider's current position. You should use dimming to get an idea of where k-trusses fit in to the graph as a whole. Hiding is more useful when you want to only look at the k-trusses for some value of k.</p>
      <h3>Select K-Trusses</h3>
      <p>This option allows you to select all the nodes and transactions which are being displayed by the visibility slider. You are then able to use this selection as you would any other selection. You might find it useful to open the selection in another graph (Ctrl+U) for closer analysis of the k-trusses.</p>
      <h3>Color Nested K-Trusses</h3>
      <p>This button allows you to color the k-trusses in your graph with a different color for each k. This means for example, that if a 4-truss contains a smaller 5-truss, then the nodes and transactions in the 4-truss but not the 5-truss will be a different color to those in both the 4-truss and the 5-truss. This button acts as a toggle, allowing you to return to your original coloring. You should use this feature if you want to see how more highly connected parts of your graph are nested inside less highly connected parts.</p>
      <h3>Nested K-Trusses Display Panel</h3>
      <p>Pressing the down arrow beneath the visibility slider on the left will expand the panel to reveal a display of rectangles arranged in columns beneath the slider. The columns line up with the numbers on the slider. The column below the number k has a rectangle for every connected component of the k-truss in the graph. The height of the rectangles is proportional to the number of nodes in the connected component they represent. You can see that as you move to higher values of k, the number and size of the rectangles decreases. You can use this panel to visualise how the k-trusses nest inside each other, as well as their relative sizes. Clicking the up arrow button will hide the panel again.</p>
      <h3>Show All Components</h3>
      <p>This is a toggle button which if set will show connected components in the "all" column, that is connected components of the entire graph as well as connected components of the k-trusses. This will rescale all the rectangles so that their heights are now proportional to the total number of nodes in the graph, rather than the total number of nodes in some k-truss. You should only use this option if a large proportion of the nodes in your graph are in k-trusses. Note that this button is disabled when the nested trusses display panel is hidden.</p>
    </div>
  </div>

  <!-- Footer -->
  <div id="footer">
    <div class="container">
      <div class="row">
        <div class="col-12">

          <!-- Contact Us -->
          <section id="contact" class="contact">
            <header>
              <h3>Contact Us</h3>
            </header>
            <p>Feel free to ask a question on Gitter or file an issue on our GitHub Issues board.</p>
            <p>
              <a href="https://gitter.im/constellation-app/community" class="button">Contact Us</a>
              <span>&nbsp;&nbsp;&nbsp;</span>
              <a href="https://github.com/constellation-app/constellation/blob/master/CONTRIBUTING.md#reporting-bugs" class="button">Report Issue</a>
            </p>
          </section>

          <!-- Copyright -->
          <div class="copyright">
            <ul class="menu">
              <li>&copy; 2025 | Website developed by the <a href="https://github.com/constellation-app">Constellation community</a>. All rights reserved.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    $(document).ready(function() {
      var allCookies = Cookies.get();
      for (var cookie in allCookies) {
        if (cookie != null) {
          $("#" + cookie).removeClass('show');
          var cookieValue = Cookies.get(cookie);
          if (cookieValue == ("true")) {
            $("#" + cookie).collapse('show');
          } else {
            $("#" + cookie).collapse('hide');
            $("#" + cookie + " .collapse").removeClass('show');
          }
        }
      }
    });

    $(".collapse").on('shown.bs.collapse', function(e) {
      console.log('shown');
      e.stopPropagation();
      var active = $(this).attr('id');
      Cookies.set(active, "true");
      $("#" + active).addClass('show');
    });
    $(".collapse").on('hidden.bs.collapse', function(e) {
      console.log('collapsed');
      e.stopPropagation();
      var active = $(this).attr('id');
      Cookies.set(active, "false");
      $("#" + active).removeClass('show');
      $("#" + active).collapse('hide');
    });

    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-139401597-2');
  </script>

  <script>
    // The script for the search 
    let pages = [];

    fetch('../search.json')
        .then(response => response.json())
        .then((documents) => {
            pages = documents;
            return miniSearch.addAll(pages);
    }, {});
        
    const miniSearch = new MiniSearch({
        fields: ['title', 'category'],
        storeFields: ['title', 'category', 'link']
    });
        
    const app = document.querySelector('.App');
    const search = document.querySelector('.Search');
    const searchInput = document.querySelector('.Search input');
    const clearButton = document.querySelector('.Search button.clear');
    const suggestionList = document.querySelector('.SuggestionList');
    const resultsList = document.querySelector(".ResultsList");
        
    const capitalize = (string) => string.replace(/(\b\w)/gi, (char) => char.toUpperCase());

    // Typing into search bar updates search results and suggestions
    searchInput.addEventListener('input', (event) => {
        const query = searchInput.value;

        const results = (query.length > 1) ? getSearchResults(query) : [];
        renderSearchResults(results);
  
        const suggestions = (query.length > 1) ? getSuggestions(query) : [];
        renderSuggestions(suggestions);
    });
        
    // Clicking on clear button clears search and suggestions
    clearButton.addEventListener('click', () => {
        searchInput.value = '';
        searchInput.focus();

        renderSearchResults([]);
        renderSuggestions([]);
    });

    // Clicking on a suggestion selects it
    suggestionList.addEventListener('click', (event) => {
        const suggestion = event.target;

        if (suggestion.classList.contains('Suggestion')) {
            const query = suggestion.innerText.trim();
            searchInput.value = query;
            searchInput.focus();

            const results = getSearchResults(query);
            renderSearchResults(results);
            renderSuggestions([]);
        }
    });

    // Clicking outside of search bar clears suggestions
    app.addEventListener('click', (event) => {
        renderSuggestions([]);
    });
        
    // Pressing up/down/enter key while on search bar navigates through suggestions
    search.addEventListener('keydown', (event) => {
        const key = event.key;

        if (key === 'ArrowDown') {
            selectSuggestion(+1);
        } else if (key === 'ArrowUp') {
            selectSuggestion(-1);
        } else if (key === 'Enter' || key === 'Escape') {
            searchInput.blur();
            renderSuggestions([]);
        } else {
            return;
        }
        const query = searchInput.value;
        const results = getSearchResults(query);
        renderSearchResults(results);
    });

    // Get the search results
    const getSearchResults = (query) => {
        return miniSearch.search(query).map(({ id }) => pages[id]);
    };

    // Get possible suggestions for what has been typed
    const getSuggestions = (query) => {
        return miniSearch.autoSuggest(query);
    };

    // Display the search results on the page
    const renderSearchResults = (results) => {
        resultsList.innerHTML = results.map(({title, link}) => {
            return `<li class="Result">
                <a href=\ ${link}> ${capitalize(title)}</a>
                </li>`;
            }).join('\n');

        if (results.length > 0) {
            app.classList.add('hasResults');
        } else {
            app.classList.remove('hasResults');
        }
    };

    // Display the suggestions
    const renderSuggestions = (suggestions) => {
        suggestionList.innerHTML = suggestions.map(({ suggestion }) => {
            return `<li class="Suggestion">${suggestion}</li>`;
        }).join('\n');

        if (suggestions.length > 0) {
            app.classList.add('hasSuggestions');
        } else {
            app.classList.remove('hasSuggestions');
        }
    };

    // Select a suggestion and set the text input text to match 
    const selectSuggestion = (direction) => {
        const suggestions = document.querySelectorAll('.Suggestion');
        const selected = document.querySelector('.Suggestion.selected');
        const index = Array.from(suggestions).indexOf(selected);

        if (index > -1) {
            suggestions[index].classList.remove('selected');
        }

        const nextIndex = Math.max(Math.min(index + direction, suggestions.length - 1), 0);
        suggestions[nextIndex].classList.add('selected');
        searchInput.value = suggestions[nextIndex].innerText;
    };     
        
    /**
     * Code for MiniSearch is based on the demo provided at:
     * https://github.com/lucaong/minisearch/blob/master/examples/plain_js
     */

  </script>
</body>